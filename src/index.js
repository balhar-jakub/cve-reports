import { argv } from 'process'
import { reserveCveAndPublish } from './publishCve.js'

const cvePath = argv[2]
const target = argv[3]
const apiKey = argv[4]
const apiUser = argv[5]
const apiOrg = argv[6]

const baseUrl = 'https://cveawg-test.mitre.org/'
if (target === 'production') {
  baseUrl = 'https://cveawg.mitre.org/'
}

if(cvePath && target && apiKey && apiUser && apiOrg) {
  await reserveCveAndPublish(cvePath, baseUrl, apiKey, apiUser, apiOrg)
} else {
  console.log('The correct usage is: node index.js {pathToTveFileWithCveDefinition} {targetEnvironment} {apiKey} {apiUser} {apiOrg}');
}
